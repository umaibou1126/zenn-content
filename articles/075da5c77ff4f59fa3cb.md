---
title: "Python Ã— Twitter API æ¤œç´¢ && è¤‡åˆã‚°ãƒ©ãƒ•è¡¨ç¤º"
emoji: "ğŸ‰"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Python, Twitter, Django, API]
published: true
---

# ç‰¹å®šãƒ¦ãƒ¼ã‚¶ã®ãƒ„ã‚¤ãƒ¼ãƒˆï¼•ä»¶

```search.py
import tweepy

consumer_key = ""
consumer_secret = ""
access_token = ""
access_token_secret = ""

auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_token_secret)
api = tweepy.API(auth)

# ç‰¹å®šã®ãƒ¦ãƒ¼ã‚¶ãƒ¼
Account = "non_0131"
tweets = api.user_timeline(Account, count=5)
for tweet in tweets:
    print('-------------------------------------------')
    print('tweetId : ', tweet.id)
    print(tweet.text)
```

#### å®Ÿè¡Œçµæœ
[![Image from Gyazo](https://i.gyazo.com/adaa16fda4224ed10e3625f0420727e5.png)](https://gyazo.com/adaa16fda4224ed10e3625f0420727e5)

# ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ 5ä»¶

```search.py
import tweepy

consumer_key = ""
consumer_secret = ""
access_token = ""
access_token_secret = ""

auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_token_secret)
api = tweepy.API(auth)

keyword = 'Python'

# ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢
for tweet in api.search(q=keyword, count=5):
    print('-------------------------------------------')
    print('name:' + tweet.user.name)
    print(tweet.text)
```

#### å®Ÿè¡Œçµæœ
[![Image from Gyazo](https://i.gyazo.com/ffb01262c7e2ea26ec43c0692aacf6f8.png)](https://gyazo.com/ffb01262c7e2ea26ec43c0692aacf6f8)

# ç‰¹å®šã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å«ã‚€ãƒ„ã‚¤ãƒ¼ãƒˆä»¶æ•°

```search.py
import tweepy

consumer_key = ""
consumer_secret = ""
access_token = ""
access_token_secret = ""

auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_token_secret)
api = tweepy.API(auth)

# ãƒ„ã‚¤ãƒ¼ãƒˆä»¶æ•° â€»æœ€å¤§10ä»¶ã¾ã§
keyword = 'äº”åç”°'
tweets_data = []

for tweet in tweepy.Cursor(
    api.search,
    q=keyword,
    tweet_mode='extended',
        lang='ja').items(10):
    tweets_data.append(tweet.full_text.strip().replace('\n', 'ã€‚') + '\n')

print(len(tweets_data))
```

#### å®Ÿè¡Œçµæœ
[![Image from Gyazo](https://i.gyazo.com/2bf11c8ae8b7bb46fc130ec0af6eb345.png)](https://gyazo.com/2bf11c8ae8b7bb46fc130ec0af6eb345)

# ç‰¹å®šã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å«ã‚€ãƒ„ã‚¤ãƒ¼ãƒˆä»¶æ•°ï¼ˆæœŸé–“æŒ‡å®šï¼‰

```search.py
import tweepy

consumer_key = ""
consumer_secret = ""
access_token = ""
access_token_secret = ""

auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_token_secret)
api = tweepy.API(auth)

tweets_data = []
keyword = 'äº”åç”°'
since = "2021-04-23 00:00:00"
until = "2021-04-24 00:00:00"

for tweet in tweepy.Cursor(api.search,
                           q=keyword,
                           tweet_mode='extended',
                           lang='ja',
                           since=since,
                           until=until).items():
    tweets_data.append(tweet.full_text.strip().replace(
        '\n', 'ã€‚') + '\n')

print(len(tweets_data))
```

#### å®Ÿè¡Œçµæœ
[![Image from Gyazo](https://i.gyazo.com/587a64c0e838041bd5216e85732bf2f8.png)](https://gyazo.com/587a64c0e838041bd5216e85732bf2f8)

# Plotly è¤‡åˆã‚°ãƒ©ãƒ•è¡¨ç¤º

```search.py
import plotly.graph_objects as go

fig = go.Figure()
X = ["2021/4/18", "2021/4/19", "2021/4/20"]
Y = [50, 100, 1000]
Z = [10, 70, 100]

fig.add_trace(go.Bar(x=X, y=Y, name="ç´¯è¨ˆ"))

fig.add_trace(go.Scatter(x=X, y=Z, name="å½“æ—¥"))

fig.update_xaxes(title="æ—¥æ™‚")
fig.update_yaxes(title="æŠ•ç¨¿æ•°ï¼ˆç´¯è¨ˆï¼‰")
fig.update_layout(font={"family": "Meiryo", "size": 20})
fig.update_layout(showlegend=True)
fig.update_layout(width=800, height=600)
fig.update_layout(template="plotly_white")
fig.show()
```

#### å®Ÿè¡Œçµæœ
[![Image from Gyazo](https://i.gyazo.com/497359afcf7c39bafbe6e55bc7512793.png)](https://gyazo.com/497359afcf7c39bafbe6e55bc7512793)


## å‚è€ƒæ–‡çŒ®
 - [Django + TwitterAPIã§ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹](https://note.com/yukiaofficial/n/nd56257767da2)
 - [Djangoã«Plotlyã®ã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤ºã™ã‚‹](https://zenn.dev/driller/articles/6c048f953c2bc71916fb)
 - [Tweepyã§Twitterã®æ¤œç´¢, ã„ã„ã­, ãƒªãƒ„ã‚¤ãƒ¼ãƒˆ](https://qiita.com/pontyo4/items/4ef6c9cb8e15a01a3129)
 - [ã€Tweepyã€‘TwitterAPIã§ã®ãƒ‡ãƒ¼ã‚¿åé›†ã§å°‘ã—é–“é•ãˆãŸè©±](https://qiita.com/yamatia/items/455f77ee98a7f22afff0)
 - [pythonã®matplotlibã§ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã—ã¦ã¿ãŸ](https://qiita.com/robitan/items/12d2dc99edd3c31848dc)
 - [Plotlyã§ä½œã‚‹ã‚°ãƒ©ãƒ•ã‚’Djangoã§ä½¿ã†](https://qiita.com/taku_hito/items/62aeb4271614f6f0347f)
 - [[Python] Plotlyã§ãã‚Šãã‚Šå‹•ã‹ã›ã‚‹ã‚°ãƒ©ãƒ•ã‚’ä½œã‚‹](https://qiita.com/inoory/items/12028af62018bf367722)
 - [Plotlyã§æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ã‚„è¤‡åˆã‚°ãƒ©ãƒ•](https://qiita.com/haru1977/items/87fba196e506f9fe225d)
 - [ã€PythonÃ—TwitterAPIã€‘Twitterã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½œæˆã¾ã§ã®é“ã€APIã§éŠã¶ç·¨ã€‘](https://tech-blog.rakus.co.jp/entry/20201106/api)
