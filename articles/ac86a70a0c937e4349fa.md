---
title: "ã€k8s / istio / Dockerã€‘å®Ÿå‹™ã§ä½¿ã£ãŸã‚³ãƒãƒ³ãƒ‰å‚™å¿˜éŒ²"
emoji: "ğŸ’¨"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Kubernetes, istio, Docker]
published: true
---

# kubectl

#### podç¢ºèª
```
$ kubectl get pod -A
$ kubectl get pod -w  // ãšã£ã¨è¡¨ç¤º
$ kubectl get pod --namespace=istio-system
```

#### Envoy-Proxyãƒ‡ãƒãƒƒã‚°
```
$ kubectl describe pod <Podå> -n istio-system  // ã‚³ãƒ³ãƒ†ãƒŠåå–å¾—
$ kubectl exec -it <Podå> -c <ã‚³ãƒ³ãƒ†ãƒŠå> -n istio-system bash
```



#### ãƒ­ã‚°ç¢ºèª
```
$ kubectl logs <NAME> -n istio-system
$ kubectl describe pod <NAME> -n istio-system
```

#### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿APIç¢ºèª
```
$ kubectl get api-versions
```

#### YAMLè¡¨ç¤º
```
$ kubectl get pod <NAME> -n istio-system -o yaml | less
```

#### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¡¨ç¤º
```
$ kubectl get ep -n istio-system
```

#### podä¸€æ‹¬å‰Šé™¤
```
kubectl delete --all pods -n istio-system
```

#### ç·¨é›†ãƒ»ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```
$ kubectl edit <NAME> deployment -n istio-system
$ kubectl delete namespace istio-system
```

#### ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤º
```
$ kubectl config get-contexts
$ kubectl config current-context
```

#### istioã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³
```
$ kubectl label namespace default istio-injection=enabled  // æœ‰åŠ¹
$ kubectl get namespace -L istio-injection  // ç¢ºèª
```

#### ClusterRole / ClusterROleBinding
```
$ kubectl get ClusterRole -n istio-system
$ kubectl get ClusterRoleBinding -n istio-system
```

# Docker

#### åœæ­¢ãƒ»å‰Šé™¤
```
$ docker stop $(docker ps -q)
$ docker rm -f `docker ps -a -q`
$ docker rmi `docker images -q`
```

#### Dockerãƒ—ãƒ­ã‚­ã‚·è¨­å®š
```
$ sudo mkdir -p /etc/systemd/system/docker.service.d
$ sudo vi /etc/systemd/system/docker.service.d/http-proxy.conf

[Service]
Environment="HTTP_PROXY=vpc.internal:3128"
Environment="HTTPS_PROXY=vpc.internal:3128"

$ sudo systemctl daemon-reload
$ sudo systemctl enable docker
$ sudo systemctl restart docker
```

#### ã‚¤ãƒ¡ãƒ¼ã‚¸ä½œæˆ
```
$ docker build -f docker/Dockerfile -t image_01 .
```

#### ãƒ­ãƒ¼ã‚«ãƒ«ãƒã‚¦ãƒ³ãƒˆ && ãƒãƒ¼ãƒˆæŒ‡å®š
```
$ docker run -itd -p 127.0.0.1:8000:8000 -v ~/Developer/sample_app:/var/www/sample_app --name container_01 image_01
```

# terraform
#### state
```
$ terraform state list
$ terraform state rm <stateå>
$ rm -rf .terraform
```

# MySQL

#### columnè¡¨ç¤º
```
$ show columns from sampler_tweetsdata;
```

#### å‰Šé™¤
```
$ delete from sample_data where id = 1;
```

#### è¿½åŠ 
```
$ insert into sample_data values (1, 200);
```

#### Git

#### ãƒ–ãƒ©ãƒ³ãƒåˆ‡ã‚Šæ›¿ãˆå¤±æ•—æ™‚
```
$ git merge --abort
```

#### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
```
$ git rm -r --cached .
```

#### ãƒ•ã‚§ãƒƒãƒ
```
$ git fetch --all
$ git fetch --tags --all
```
