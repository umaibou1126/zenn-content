---
title: ã€Flutterã€‘é­é‡ã—ãŸã‚¨ãƒ©ãƒ¼&&è§£æ±ºç­–ã¾ã¨ã‚â‘¢
emoji: ğŸ˜¸
type: tech
topics: [Flutter, Firebase, iOS, Android]
published: true
---

## å‰å›
 - [ã€Flutterã€‘é­é‡ã—ãŸã‚¨ãƒ©ãƒ¼&&è§£æ±ºç­–ã¾ã¨ã‚](https://zenn.dev/endo/articles/8d037e3e7a29422e557c)
 - [ã€Flutterã€‘é­é‡ã—ãŸã‚¨ãƒ©ãƒ¼&&è§£æ±ºç­–ã¾ã¨ã‚â‘¡](https://zenn.dev/endo/articles/2e8722076a0da536fe86)
 - [ã€Flutterã€‘AWS Amplify / Firebaseã‚¨ãƒ©ãƒ¼ã¾ã¨ã‚](https://zenn.dev/endo/articles/5e86c3a3534d107690b9)


## ã€Bad state: Stream has already been listened toã€‘
#### â—† ã‚¨ãƒ©ãƒ¼å†…å®¹
```
Bad state: Stream has already been listened to.
```

#### â—† è§£æ±ºç­–

```pubspec.yaml
dependencies:
  rxdart: ^0.25.0
```

```main.dart
// StreamController â†’ BehaviorSubject
final _sample = StreamController<String>();  //before
final _sample = BehaviorSubject<String>();  //after
```

## ã€setState() called after dispose();ã‚¨ãƒ©ãƒ¼ã€‘

#### â—† ã‚¨ãƒ©ãƒ¼å†…å®¹
```
This error happens if you call setState() on a State object for a widget that no longer appears in the widget tree
```

#### â—† è§£æ±ºç­–

```main.dart
int _count = 0;

void _sampleCounter() {
  if(mounted) {  //è¿½åŠ 
    setState(() {
      _count++;
  });
}
```

## ã€cloud_firestore/permission-deniedã€‘

#### â—† ã‚¨ãƒ©ãƒ¼å†…å®¹
```
cloud_firestore/permission-denied] The caller does not have permission to execute the specified operation.
```

#### â—† è§£æ±ºç­–

```
Firebaseã‚³ãƒ³ã‚½ãƒ¼ãƒ« > ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé¸æŠ > Cloud Firestore > ã€€ãƒ«ãƒ¼ãƒ«
```

## ã€Dartæ¡ä»¶åˆ†å²ã€‘

#### â—† switchæ–‡
```main.dart
const sample1 = "çŠ¬";
const sample2 = "çŒ«";
var pets = "ãƒšãƒƒãƒˆ";

switch (pets) {
  case sample1:
    print('çŠ¬å¥½ã');
    break;

  case sample2:
    continue sample1;

  default:
    print('çŠ¬ã‚‚çŒ«ã‚‚å¥½ã');
    break;
}
```

#### â—† ifæ–‡

```main.dart
var pets = "ãƒšãƒƒãƒˆ";

if (pets == "çŠ¬") {
  print('çŠ¬å¥½ã');
} else if (pets == "çŒ«") {
  print('çŒ«å¥½ã');
} else
  print('çŠ¬ã‚‚çŒ«ã‚‚å¥½ã');
}
```

## ã€setStateãƒ¡ã‚½ãƒƒãƒ‰ã€‘

#### â—† setState

```main.dart
int _count = 0;

void _sampleCounter() {
  setState(() {
    _count++;
  });
}
```

## å‚è€ƒæ–‡çŒ®
 - [ã€Flutterã€‘ãƒã‚°è§£æ±º: Bad state: Stream has already been listened to.](https://qiita.com/tetsukick/items/b51713d637b66ad84510)
 - [RxDartã®BehaviorSubjectã¨PublishSubjectã®é•ã„ã¨ä½¿ã„åˆ†ã‘](https://qiita.com/tetsufe/items/28ea0a07410efd6d6a9f)
 - [ã€Flutterã€‘é›»å“ãƒ»è¨ˆç®—æ©Ÿã‚¢ãƒ—ãƒªã®ä½œæˆ 2](https://2357developnote.blogspot.com/2020/05/flutter-calculator2.html)
 - [Flutterï¼šæ‚ªã„çŠ¶æ…‹ï¼šã‚¹ãƒˆãƒªãƒ¼ãƒ ã¯æ—¢ã«ãƒªãƒƒã‚¹ãƒ³ã•ã‚Œã¦ã„ã¾ã™](https://www.it-swarm-ja.tech/ja/dart/flutter%EF%BC%9A%E6%82%AA%E3%81%84%E7%8A%B6%E6%85%8B%EF%BC%9A%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%81%AF%E6%97%A2%E3%81%AB%E3%83%AA%E3%83%83%E3%82%B9%E3%83%B3%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%81%BE%E3%81%99/806158797/)
 - [# Dartã®åˆ¶å¾¡æ–‡ï¼ˆæ¡ä»¶åˆ†å²ï¼‰](https://qiita.com/take0116/items/f85713100ff6af1d6594)
 - [rxdart 0.25.0](https://pub.dev/packages/rxdart/install)
 - [ã€Dartå…¥é–€ã€‘ifæ–‡ã®ä½¿ã„æ–¹ã‚’èª¬æ˜ã—ã¾ã™ï¼ˆswitchã‚„ä¸‰é …æ¼”ç®—å­ã¨ã‚‚æ¯”è¼ƒï¼‰](https://programming-dojo.com/%E3%80%90dart%E5%85%A5%E9%96%80%E3%80%91if%E6%96%87%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9%E3%82%92%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%BE%E3%81%99/)
 - [åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼æ–‡ (Control flow statements)](https://www.cresc.co.jp/tech/java/Google_Dart2/language/control_flow/control_flow.html)
 - [Flutterã®setStateã¨ã¯ï¼Ÿ](https://qiita.com/koizumiim/items/5cc0f68d224b2cc949ba)
 - [ã€Flutterã€‘setStateã‚’initStateã®ä¸­ã§å‘¼ã¶æ™‚ã®æ³¨æ„ç‚¹](https://blog.mrym.tv/2019/12/traps-on-calling-setstate-inside-initstate/)
 - [firestoreã®collectionGroupã®ãƒ‡ãƒ¼ã‚¿å–å¾—ã§ `The caller does not have permission to execute the specified operation.`](https://qiita.com/HorikawaTokiya/items/a5f07e26e3b2ef2732ee)
