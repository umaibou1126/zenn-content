---
ã€Flutterã€‘AWS Amplify / Firebaseã‚¨ãƒ©ãƒ¼ã¾ã¨ã‚
emoji: ğŸ˜¸
type: tech
topics: [Flutter, Firebase, iOS, Android]
published: true
---
## FlutteræŠ•ç¨¿è¨˜äº‹
 - [ã€Flutterã€‘é­é‡ã—ãŸã‚¨ãƒ©ãƒ¼&&è§£æ±ºç­–ã¾ã¨ã‚](https://qiita.com/umaibou1126/items/050ee66f94f10ec114df)
 - [ã€Flutterã€‘é­é‡ã—ãŸã‚¨ãƒ©ãƒ¼&&è§£æ±ºç­–ã¾ã¨ã‚â‘¡](https://qiita.com/umaibou1126/items/0ccc1502a98f358f0ccb)
 - [ã€Flutterã€‘é­é‡ã—ãŸã‚¨ãƒ©ãƒ¼&&è§£æ±ºç­–ã¾ã¨ã‚â‘¢](https://qiita.com/umaibou1126/items/9e06bd55dae86631b0f3)

## å‚è€ƒæ–‡çŒ®
 - [cannot run amplify codegen #288](https://github.com/aws-amplify/amplify-flutter/issues/288)
 - [cocoaPodsã§ã€Œthey required a higher minimum deployment target. ã€ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸæ™‚ã®å¯¾å‡¦æ–¹æ³•](https://program-life.com/1767)
 - [Androidã®è¡¨ç¤ºç”»é¢ã®å›è»¢å›ºå®š](https://qiita.com/okhiroyuki/items/889a4d7b4284e3280efe)
 - [add 'tools:replace=â€œandroid:labelâ€' to <application> element at AndroidManifest.xml:16:5-39:19 to override](https://stackoverflow.com/questions/54924256/add-toolsreplace-androidlabel-to-application-element-at-androidmanifest)
 - [Getting started](https://docs.amplify.aws/lib/datastore/getting-started/q/platform/flutter)
 - [manual_migration_settings.gradle.md](https://github.com/flutter/flutter/blob/master/packages/flutter_tools/gradle/manual_migration_settings.gradle.md)

## 1. settings_aar.gradleãŒå­˜åœ¨ã—ãªã„ã‚¨ãƒ©ãƒ¼

##### â—† ã‚¨ãƒ©ãƒ¼å†…å®¹
```
1. Copy `settings.gradle` as `settings_aar.gradle`
2. Remove the following code from `settings_aar.gradle`:

    def localPropertiesFile = new File(rootProject.projectDir, "local.properties")
    def properties = new Properties()

    assert localPropertiesFile.exists()
    localPropertiesFile.withReader("UTF-8") { reader -> properties.load(reader) }

    def flutterSdkPath = properties.getProperty("flutter.sdk")
    assert flutterSdkPath != null, "flutter.sdk not set in local.properties"
    apply from: "$flutterSdkPath/packages/flutter_tools/gradle/app_plugin_loader.gradle"
```

##### â—† è§£æ±ºç­–
```setting_aar.gradle
include ':app'
def flutterProjectRoot = rootProject.projectDir.parentFile.toPath()

def plugins = new Properties()
def pluginsFile = new File(flutterProjectRoot.toFile(), '.flutter-plugins')
if (pluginsFile.exists()) {
    pluginsFile.withReader('UTF-8') { reader -> plugins.load(reader) }
}

plugins.each { name, path ->
    def pluginDirectory = flutterProjectRoot.resolve(path).resolve('android').toFile()
    include ":$name"
    project(":$name").projectDir = pluginDirectory
}
```



## 2. amplify add codegenå®Ÿè¡Œã‚¨ãƒ©ãƒ¼

##### â—† ã‚¨ãƒ©ãƒ¼å†…å®¹
```
Error: amplify-codegen-appsync-model-plugin not support language target flutter. Supported codegen targets arr java, android, swift, ios, javascript, typescript
```

##### â—† è§£æ±ºç­–
```
$ npm install -g @aws-amplify/cli
 $ amplify -v
 $ amplify upgrade
 4.41.0
```

## 3. Podfile platformã‚¨ãƒ©ãƒ¼
##### â—† ã‚¨ãƒ©ãƒ¼å†…å®¹
```
they required a higher minimum deployment target.
```

##### â—† è§£æ±ºç­–
```
platform :ios, '8.0'   // before
platform :ios, '9.0'   // after
```

## 4. android:labelã‚¨ãƒ©ãƒ¼

##### â—† ã‚¨ãƒ©ãƒ¼å†…å®¹
```
Error: Attribute application@label value=(flutter_bloc_pattern) from AndroidManifest.xml:18:9-45 is also present at [:DynamsoftBarcodeReader] AndroidManifest.xml:13:9-41 value=(@string/app_name).
```

##### â—† è§£æ±ºç­–
```AndroidManifest.xml
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="com.example.sample">   // è¿½è¨˜
    <!-- io.flutter.app.FlutterApplication is an android.app.Application that
         calls FlutterMain.startInitialization(this); in its onCreate method.
         In most cases you can leave this as-is, but you if you want to provide
         additional functionality it is fine to subclass or reimplement
         FlutterApplication and put your custom class here. -->
    <application
        tools:replace="android:name"
        android:name="io.flutter.app.FlutterApplication"
        android:label="sample"
        android:icon="@mipmap/ic_launcher">
```

## 5. Androidç”»é¢å›ºå®š

##### â—† æ¨ªç”»é¢å›ºå®š
```AndroidManifest.xml
<activity
    android:name=".MainActivity"
    android:screenOrientation="landscape"
</activity>
```

##### â—† ç¸¦ç”»é¢å›ºå®š
```AndroidManifest.xml
<activity
    android:name=".MainActivity"
    android:screenOrientation="portrait"
</activity>
```
