---
title: "lambda Ã— SNS ã‚¯ãƒ­ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š"
emoji: "ğŸ˜Š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["AWS"]
published: true
---

# SNSã‚¢ã‚¯ã‚»ã‚¹ãƒãƒªã‚·ãƒ¼
[![Image from Gyazo](https://i.gyazo.com/837a912afea6933829cb482d21a419b5.png)](https://gyazo.com/837a912afea6933829cb482d21a419b5)

# lambda IAMãƒ­ãƒ¼ãƒ«
[![Image from Gyazo](https://i.gyazo.com/935c49b996f5b1b1eefe13bb9acc3a7c.png)](https://gyazo.com/935c49b996f5b1b1eefe13bb9acc3a7c)

# lambdaä½œæˆ
[![Image from Gyazo](https://i.gyazo.com/d0769f94b473f9bba3a41613b67519d0.png)](https://gyazo.com/d0769f94b473f9bba3a41613b67519d0)

# lambdaã‚³ãƒ¼ãƒ‰
[![Image from Gyazo](https://i.gyazo.com/4d182a90b980a9cbb495c382bad0ac08.png)](https://gyazo.com/4d182a90b980a9cbb495c382bad0ac08)

```
var aws = require('aws-sdk');

var sns = new aws.SNS({
   apiVersion: '2010-03-31',
   region: 'ap-northeast-1'
});

function timer(ms, name) {
  console.log(`name: ${name} start!`)
  return new Promise((resolve, reject) => {
    setTimeout(() => resolve(name), ms)
  })
}

exports.handler = async function(event, context) {
    console.log('publish start')
    await timer(1000, publish(event, context));

    function publish(event, context) {
        sns.publish({
            Message: 'Message',
            Subject: 'Message title ' ,
            TargetArn: 'arn:aws:sns:region:accountId:åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ'ã€€// åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆSNSã®Arn
            }, function(err, data) {
                if (err) {
                    console.log(err.stack);
                    return "failed publish".err.stack;
                }
                console.log('publish sent');
                console.log(data);
        });
    }
};
```

# å‚è€ƒæ–‡çŒ®
 - [Lambda (runtime Node.js 8.10) ã‹ã‚‰ SNS ã¸ publish ã—ã¦ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã™ã‚‹](https://qiita.com/kkam0907/items/a69d5f483d2be961683c)
