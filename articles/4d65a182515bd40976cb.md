---
title: "ã€Vue/Railsã€‘Vue + Railsã§"Hello Vue!"è¡¨ç¤º"
emoji: "ğŸ“Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Vue.js, Rails, Ruby, Javascript]
published: true
---

# Vue + Railsã‚¢ãƒ—ãƒªä½œæˆ

#### â—† Railsã‚¢ãƒ—ãƒªä½œæˆ
```
// "-webpack=vue"ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§Vue.jsä½¿ç”¨å¯èƒ½
$ rails new <ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å> -webpack=vue
```

#### â—† modelä½œæˆ
```
// ã‚«ãƒ©ãƒ åï¼šname ãƒ‡ãƒ¼ã‚¿å‹ï¼štext
$ rails g model sample name:text
```

#### â—† migrationãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†(Hello.Vue!è¡¨ç¤ºã«ã¯ä¸è¦)
```db/migrate/20200627045139_create_sample.rb
class CreateSample < ActiveRecord::Migration[6.0]
  def change
    create_table :sample do |t|
      t.text :name, null: false, default: ""
    end
  end
end
```

#### â—† ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
```
$ rails db:create      //ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆ
$ rails db:migrateã€€   //ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿæ–½
```

#### â—† controllerä½œæˆ

```app/controllers/home_controller.rb
class HomeController < ApplicationController
  def index
  end
end
```

#### â—† routes.rbç·¨é›†
```config/routes.rb
Rails.application.routes.draw do
  root to: 'home#index'
end
```

####â—† index.html.erbç·¨é›†
```app/views/home/index.html.erb
<%= javascript_pack_tag 'hello_vue' %>
<%= stylesheet_pack_tag 'hello_vue' %>
```

#### â—† hello.vue.jsï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§è¨­å®šæ¸ˆï¼‰
```app/javascript/packs/hello_vue.js
import Vue from 'vue'
import App from '../app.vue'

document.addEventListener('DOMContentLoaded', () => {
  const el = document.body.appendChild(document.createElement('hello'))
  const app = new Vue({
    el,
    render: h => h(App)
  })

  console.log(app)
})
```

#### â—† app.vue(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§è¨­å®šæ¸ˆ)
```app/javascript/app.vue
<template>
  <div id="app">
    <p>{{ message }}</p>
  </div>
</template>

<script>
export default {
  data: function () {
    return {
      message: "Hello Vue!"
    }
  }
}
</script>

<style scoped>
p {
  font-size: 2em;
  text-align: center;
}
</style>
```

# å‚™å¿˜éŒ²

#### â—† before_action
 - ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—ã¦ã€``before_action``ã«ã‚»ãƒƒãƒˆã™ã‚‹

```login_controller.rb
class LoginController < ApplicationController
  before_action :set_answer

  def set_answer
    @sample = "Hello World!"
  end
end
```

#### â—† rescue_from
 - ``ä¾‹å¤–å‡¦ç†``ã€‚ã‚¨ãƒ©ãƒ¼å‡¦ç†ã‚’è¡Œã†ç”»é¢ã‚’è¨­å®šã™ã‚‹
 - ``app/controller/application_controller.rb``ã«è¨˜è¿°ã™ã‚‹

```app/controller/application_controller.rb
class ApplicationController < ActionController::Base

  rescue_from ActiveRecord::RecordNotFound, with: :rescue404

end
```

# é­é‡ã—ãŸã‚¨ãƒ©ãƒ¼

#### â—† ã‚¨ãƒ©ãƒ¼å†…å®¹â‘ 
```
Webpacker::Manifest::MissingEntryError in Home#index
```

#### è§£æ±ºç­–ï¼šWebpackã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```
$ yarn
$ bin/yarn
$ webpack
$ webpack
```

#### â—† ã‚¨ãƒ©ãƒ¼å†…å®¹â‘¡
```
Error: vue-loader requires @vue/compiler-sfc to be present in the dependency tree.
```

#### è§£æ±ºç­–ï¼švue-loaderãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰
```
$ npm remove vue-loader
$ npm install --save vue-loader@15.9.2
$ yarn add vue-loader@15.9.2
```

#### â—† ã‚¨ãƒ©ãƒ¼å†…å®¹â‘¢
```
Sprockets::Rails::Helper::AssetNotFound in Home#index
 <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
```
#### è§£æ±ºç­–ï¼šapp/views/layouts/application.html.erbç·¨é›†
```app/views/layouts/application.html.erb
<!-- javascript_include_tagã®è¡Œã‚’å‰Šé™¤ -->
<%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
```

# å‚è€ƒæ–‡çŒ®

 - [Ruby on Rails, Vue.js ã§å§‹ã‚ã‚‹ãƒ¢ãƒ€ãƒ³ WEB ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¥é–€](https://qiita.com/tatsurou313/items/4f18c0d4d231e2fb55f4)
 - [Vue.jsã¨Railsã§TODOã‚¢ãƒ—ãƒªã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¿ãŸã„ãªã‚‚ã®ã‚’ä½œã£ã¦ã¿ãŸ](https://qiita.com/naoki85/items/51a8b0f2cbf949d08b11)
 - [å®Ÿè·µã®å ´ã§å½¹ç«‹ã¤ï¼Ruby on Railsã®before_actionã®ä½¿ã„æ–¹ã€åˆå¿ƒè€…å‘ã‘ã€‘](https://techacademy.jp/magazine/7464)
 - [ã€Railsã€‘ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã«ã¤ã¾ã¥ããŒã¡ãªã‚¨ãƒ©ãƒ¼é›†](https://blog.yuhiisk.com/archive/2018/04/24/rails-error-collection.html)
 - [ã‚¨ãƒ©ãƒ¼ï¼švue-loaderã§ã¯ã€ä¾å­˜é–¢ä¿‚ãƒ„ãƒªãƒ¼ã«@ vue / compiler-sfcãŒå­˜åœ¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ ï¼ƒ1672](https://github.com/vuejs/vue-loader/issues/1672)
 - [ã€npm/yarnã€‘ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹](https://rennnosukesann.hatenablog.com/entry/2019/01/04/004352)
